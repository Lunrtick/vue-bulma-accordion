import Vue from"vue";import __vue_normalize__ from"vue-runtime-helpers/normalize-component.js";import __vue_create_injector__ from"vue-runtime-helpers/inject-style/browser.js";var EventBus=new Vue,script={name:"bulma-accordion",props:{initialOpenItem:{required:!1,type:[Number,String],default:null},initialOpenItems:{required:!1,type:Array,default:null,validator:a=>Array.isArray(a)&&!a.some(a=>"number"!=typeof a)},caretAnimation:{required:!1,type:Object,default:()=>({duration:"450ms",timerFunc:"ease"}),validator:a=>{const b="string"==typeof a.duration&&"string"==typeof a.timerFunc||!0===a.none;return b}},dropdown:{required:!1,type:Boolean,default:!1},icon:{required:!1,type:String,default:"caret",validator:a=>{return"caret"===a||"plus-minus"===a||"custom"===a}},slide:{required:!1,type:Object,default:()=>({duration:"700ms",timerFunc:"ease"}),validator:a=>{const b="string"==typeof a.duration&&"string"==typeof a.timerFunc;return b}}},mounted(){EventBus.$on("click",this.handleChildClicked),this.$nextTick(()=>{this.$children.forEach((a,b)=>{const c=b+"";a.setUniqueId(c),this.children_toggle_status[c]=!1}),this.openInitialItems(this.$children.length)})},data(){return{children_toggle_status:{}}},methods:{handleChildClicked(a){if(!this.dropdown)for(const b in this.children_toggle_status)this.children_toggle_status[b]&&b!==a&&(EventBus.$emit("toggle",b),this.children_toggle_status[b]=!1);this.children_toggle_status[a]=!this.children_toggle_status[a],EventBus.$emit("toggle",a)},openInitialItems(a){const b=this.initialOpenItem,c=this.initialOpenItems;null===b?null!==c&&c.forEach(b=>{this.openInitialItem(b,a)}):this.openInitialItem(b,a)},openInitialItem(a,b){const c="number"==typeof a?a:parseInt(a,10);if(0<c&&c<=b)this.handleChildClicked(c-1+"");else throw new Error(`There are only ${b} AccordionItems, ${c} is out of bounds. [indexing from 1]`)}}};const __vue_script__=script;var __vue_render__=function(){var a=this,b=a.$createElement,c=a._self._c||b;return c("div",{staticClass:"accordion"},[a._t("default")],2)},__vue_staticRenderFns__=[];__vue_render__._withStripped=!0;const __vue_inject_styles__=function(a){a&&a("data-v-dd1d957e_0",{source:"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",map:{version:3,sources:[],names:[],mappings:"",file:"BulmaAccordion.vue"},media:void 0})},__vue_scope_id__=void 0,__vue_module_identifier__=void 0,__vue_is_functional_template__=!1;var BulmaAccordion=__vue_normalize__({render:__vue_render__,staticRenderFns:__vue_staticRenderFns__},__vue_inject_styles__,__vue_script__,__vue_scope_id__,__vue_is_functional_template__,__vue_module_identifier__,__vue_create_injector__,void 0),script$1={props:{minus:{required:!0,type:Boolean}},computed:{verticalClasses(){return{vertical:!0,"vertical-rotated":this.minus}}}};const __vue_script__$1=script$1;var __vue_render__$1=function(){var a=this,b=a.$createElement,c=a._self._c||b;return c("div",{staticClass:"plus-minus"},[c("div",{staticClass:"horizontal"}),a._v(" "),c("div",{class:a.verticalClasses})])},__vue_staticRenderFns__$1=[];__vue_render__$1._withStripped=!0;const __vue_inject_styles__$1=function(a){a&&a("data-v-5c06125a_0",{source:"\n.horizontal[data-v-5c06125a],\n.vertical[data-v-5c06125a] {\n    position: absolute;\n    border-radius: 3px;\n    background: rgb(100, 100, 100);\n    transform: rotate(0deg);\n    transition: 400ms all ease-out;\n}\n.horizontal[data-v-5c06125a] {\n    top: 45%;\n    left: 10%;\n    right: 10%;\n    height: 10%;\n}\n.vertical[data-v-5c06125a] {\n    top: 10%;\n    bottom: 10%;\n    left: 45%;\n    width: 10%;\n}\n.vertical-rotated[data-v-5c06125a] {\n    transform: rotate(90deg);\n}\n.plus-minus[data-v-5c06125a] {\n    position: relative;\n    display: block;\n    width: 100%;\n    height: 100%;\n}\n",map:{version:3,sources:["/home/gabe/Dev/Projects/OSS/vue-bulma-accordion/src/components/PlusMinus.vue"],names:[],mappings:";AA2BA;;IAEA,kBAAA;IACA,kBAAA;IACA,8BAAA;IACA,uBAAA;IACA,8BAAA;AACA;AAEA;IACA,QAAA;IACA,SAAA;IACA,UAAA;IACA,WAAA;AACA;AAEA;IACA,QAAA;IACA,WAAA;IACA,SAAA;IACA,UAAA;AACA;AACA;IACA,wBAAA;AACA;AACA;IACA,kBAAA;IACA,cAAA;IACA,WAAA;IACA,YAAA;AACA",file:"PlusMinus.vue",sourcesContent:["<template>\n    <div class=\"plus-minus\">\n        <div class=\"horizontal\"></div>\n        <div :class=\"verticalClasses\"></div>\n    </div>\n</template>\n\n<script>\nexport default {\n    props: {\n        minus: {\n            required: true,\n            type: Boolean\n        }\n    },\n    computed: {\n        verticalClasses() {\n            return {\n                vertical: true,\n                \"vertical-rotated\": this.minus\n            };\n        }\n    }\n};\n</script>\n\n<style scoped>\n.horizontal,\n.vertical {\n    position: absolute;\n    border-radius: 3px;\n    background: rgb(100, 100, 100);\n    transform: rotate(0deg);\n    transition: 400ms all ease-out;\n}\n\n.horizontal {\n    top: 45%;\n    left: 10%;\n    right: 10%;\n    height: 10%;\n}\n\n.vertical {\n    top: 10%;\n    bottom: 10%;\n    left: 45%;\n    width: 10%;\n}\n.vertical-rotated {\n    transform: rotate(90deg);\n}\n.plus-minus {\n    position: relative;\n    display: block;\n    width: 100%;\n    height: 100%;\n}\n</style>\n"]},media:void 0})},__vue_scope_id__$1="data-v-5c06125a",__vue_module_identifier__$1=void 0,__vue_is_functional_template__$1=!1;var PlusMinus=__vue_normalize__({render:__vue_render__$1,staticRenderFns:__vue_staticRenderFns__$1},__vue_inject_styles__$1,__vue_script__$1,__vue_scope_id__$1,__vue_is_functional_template__$1,__vue_module_identifier__$1,__vue_create_injector__,void 0);function transitionEndEventName(a){const b={transition:"transitionend",OTransition:"otransitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(const c in b)if(b.hasOwnProperty(c)&&a.style[c]!==void 0)return b[c];throw new Error("TransitionEnd event is not supported in this browser")}var script$2={name:"bulma-accordion-item",components:{PlusMinus},data(){return{isOpen:!1,autoHeightInterval:null,showCardContent:!1,uniqueId:null}},mounted(){EventBus.$on("toggle",this.handleToggleRequest);const a=this.$refs.body,b=transitionEndEventName(a);a.addEventListener(b,()=>{"0px"===a.style.height?(this.autoHeightStop(),this.showCardContent=!1):this.autoHeightStart(a)})},destroyed(){EventBus.$off("toggle")},watch:{isOpen(){this.doTheSlide()}},computed:{config(){const{caretAnimation:a={duration:"450ms",timerFunc:"ease"},dropdown:b=!1,icon:c="caret",slide:d={duration:"700ms",timerFunc:"ease"}}=this.$parent;return{animation:a,dropdown:b,icon:c,slide:d}},dropdownIconClasses(){return{"header-icon":!0,"caret-down":!this.isOpen}},card_classes(){return{card:!0,"card-active":this.isOpen}},card_content_classes(){return{"card-content":!0,"is-hidden":!this.showCardContent}},footerClasses(){return{"card-footer":!0,"is-hidden":!this.$slots.footer}},usingCustomIcon(){return"custom"===this.config.icon},showCaret(){return"caret"===this.config.icon},showPlus(){return"plus-minus"===this.config.icon&&!this.isOpen},showMinus(){return"plus-minus"===this.config.icon&&this.isOpen},slideStyle(){const a=this.config.slide;return{transition:`all ${a.duration} ${a.timerFunc}`}},iconStyle(){const a=this.config.animation;return!0===a.none?{}:{transition:`all ${a.duration} ${a.timerFunc}`}}},methods:{handleToggleRequest(a){a===this.uniqueId&&this.toggleCollapsed()},setUniqueId(a){this.uniqueId=a},notifyOfClick(){this.uniqueId&&EventBus.$emit("click",this.uniqueId)},collapse(){this.isOpen=!1},toggleCollapsed(){this.isOpen=!this.isOpen},doTheSlide(){const a=this.$refs.body;!0===this.isOpen?(this.showCardContent=!0,this.$nextTick().then(()=>{this.adjustHeight(a,a.scrollHeight)})):this.slideUp(a)},adjustHeight(a,b){a.style.height=`${b}px`},slideUp(a){"auto"===a.style.height&&(a.style.height=`${a.scrollHeight}px`),a.style.height="0px"},autoHeightStart(a){this.autoHeightInterval&&this.autoHeightStop(),this.autoHeightInterval=setInterval(()=>{try{const b=this.$refs.bodyContent.scrollHeight+this.$refs.bodyFooter.scrollHeight+1;"0px"!==a.style.height&&b!==a.style.height&&this.isOpen&&this.adjustHeight(a,b)}catch(a){this.autoHeightStop()}},100)},autoHeightStop(){clearInterval(this.autoHeightInterval),this.autoHeightInterval=null}}};const __vue_script__$2=script$2;var __vue_render__$2=function(){var a=this,b=a.$createElement,c=a._self._c||b;return c("div",{class:a.card_classes},[c("div",{staticClass:"card-header",on:{click:a.notifyOfClick}},[c("p",{staticClass:"card-header-title"},[a._t("title")],2),a._v(" "),c("p",{staticClass:"card-header-icon"},[a.usingCustomIcon?c("span",{staticClass:"icon"},[a._t("icon"),a._v(" "),a.isOpen?a._t("icon-open"):a._t("icon-closed")],2):c("span",{staticClass:"icon"},[a.showCaret?c("svg",{class:a.dropdownIconClasses,style:a.iconStyle,attrs:{version:"1.1",viewBox:"0 0 129 129","enable-background":"new 0 0 129 129"}},[c("g",[c("path",{attrs:{d:"m121.3,34.6c-1.6-1.6-4.2-1.6-5.8,0l-51,51.1-51.1-51.1c-1.6-1.6-4.2-1.6-5.8,0-1.6,1.6-1.6,4.2 0,5.8l53.9,53.9c0.8,0.8 1.8,1.2 2.9,1.2 1,0 2.1-0.4 2.9-1.2l53.9-53.9c1.7-1.6 1.7-4.2 0.1-5.8z"}})])]):a._e(),a._v(" "),a.showPlus||a.showMinus?c("PlusMinus",{attrs:{minus:a.showMinus}}):a._e()],1)])]),a._v(" "),c("div",{ref:"body",staticClass:"accordion-body",style:a.slideStyle},[c("div",{ref:"bodyContent",class:a.card_content_classes},[a._t("content")],2),a._v(" "),c("div",{ref:"bodyFooter",class:a.footerClasses},[a._t("footer")],2)])])},__vue_staticRenderFns__$2=[];__vue_render__$2._withStripped=!0;const __vue_inject_styles__$2=function(a){a&&a("data-v-a0f6932e_0",{source:"\n.accordion-body[data-v-a0f6932e] {\n    height: 0px;\n    overflow: hidden;\n}\n.caret-down[data-v-a0f6932e] {\n    transform: rotate(180deg);\n}\n.header-icon[data-v-a0f6932e] {\n    width: 100%;\n}\n",map:{version:3,sources:["/home/gabe/Dev/Projects/OSS/vue-bulma-accordion/src/components/BulmaAccordionItem.vue"],names:[],mappings:";AAwNA;IACA,WAAA;IACA,gBAAA;AACA;AACA;IACA,yBAAA;AACA;AACA;IACA,WAAA;AACA",file:"BulmaAccordionItem.vue",sourcesContent:["<template>\n    <div :class=\"card_classes\">\n        <div class=\"card-header\" @click=\"notifyOfClick\">\n            <p class=\"card-header-title\">\n                <slot name=\"title\"></slot>\n            </p>\n            <p class=\"card-header-icon\">\n                <span v-if=\"!usingCustomIcon\" class=\"icon\">\n                    <svg v-if=\"showCaret\" :class=\"dropdownIconClasses\" :style=\"iconStyle\" version=\"1.1\" viewBox=\"0 0 129 129\" enable-background=\"new 0 0 129 129\">\n                        <g>\n                            <path d=\"m121.3,34.6c-1.6-1.6-4.2-1.6-5.8,0l-51,51.1-51.1-51.1c-1.6-1.6-4.2-1.6-5.8,0-1.6,1.6-1.6,4.2 0,5.8l53.9,53.9c0.8,0.8 1.8,1.2 2.9,1.2 1,0 2.1-0.4 2.9-1.2l53.9-53.9c1.7-1.6 1.7-4.2 0.1-5.8z\"/>\n                        </g>\n                    </svg>\n                    <PlusMinus v-if=\"showPlus || showMinus\" :minus=\"showMinus\"/>\n                </span>\n                <span v-else class=\"icon\">\n                    <slot name=\"icon\"></slot>\n                    <slot v-if=\"isOpen\" name=\"icon-open\"></slot>\n                    <slot v-else name=\"icon-closed\"></slot>\n                </span>\n            </p>\n        </div>\n        <div class=\"accordion-body\" ref=\"body\" :style=\"slideStyle\">\n            <div :class=\"card_content_classes\" ref=\"bodyContent\">\n                <slot name=\"content\"></slot>\n            </div>\n            <div :class=\"footerClasses\" ref=\"bodyFooter\">\n                <slot name=\"footer\"></slot>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport PlusMinus from \"./PlusMinus.vue\";\nimport { transitionEndEventName } from \"../utils/index.js\";\nimport EventBus from \"../EventBus.js\";\nexport default {\n    name: \"bulma-accordion-item\",\n    components: {\n        PlusMinus\n    },\n    data() {\n        return {\n            isOpen: false,\n            autoHeightInterval: null,\n            showCardContent: false,\n            uniqueId: null\n        };\n    },\n    mounted() {\n        EventBus.$on(\"toggle\", this.handleToggleRequest);\n\n        const accordionBody = this.$refs.body;\n        const eName = transitionEndEventName(accordionBody);\n        accordionBody.addEventListener(eName, e => {\n            if (accordionBody.style.height !== \"0px\") {\n                this.autoHeightStart(accordionBody);\n            } else {\n                this.autoHeightStop();\n                this.showCardContent = false;\n            }\n        });\n    },\n    destroyed() {\n        EventBus.$off(\"toggle\");\n    },\n    watch: {\n        isOpen(isOpen) {\n            this.doTheSlide();\n        }\n    },\n    computed: {\n        config() {\n            const {\n                caretAnimation: animation = {\n                    duration: \"450ms\",\n                    timerFunc: \"ease\"\n                },\n                dropdown = false,\n                icon = \"caret\",\n                slide = {\n                    duration: \"700ms\",\n                    timerFunc: \"ease\"\n                }\n            } = this.$parent;\n            return {\n                animation,\n                dropdown,\n                icon,\n                slide\n            };\n        },\n        dropdownIconClasses() {\n            return {\n                \"header-icon\": true,\n                \"caret-down\": !this.isOpen\n            };\n        },\n        card_classes() {\n            return {\n                card: true,\n                \"card-active\": this.isOpen\n            };\n        },\n        card_content_classes() {\n            return {\n                \"card-content\": true,\n                \"is-hidden\": !this.showCardContent\n            };\n        },\n        footerClasses() {\n            return {\n                \"card-footer\": true,\n                \"is-hidden\": !this.$slots.footer\n            };\n        },\n        usingCustomIcon() {\n            return this.config.icon === \"custom\";\n        },\n        showCaret() {\n            return this.config.icon === \"caret\";\n        },\n        showPlus() {\n            return this.config.icon === \"plus-minus\" && !this.isOpen;\n        },\n        showMinus() {\n            return this.config.icon === \"plus-minus\" && this.isOpen;\n        },\n        slideStyle() {\n            const c = this.config.slide;\n            return {\n                transition: `all ${c.duration} ${c.timerFunc}`\n            };\n        },\n        iconStyle() {\n            const c = this.config.animation;\n            if (c.none === true) {\n                return {};\n            }\n            return {\n                transition: `all ${c.duration} ${c.timerFunc}`\n            };\n        }\n    },\n    methods: {\n        handleToggleRequest(toggleId) {\n            if (toggleId === this.uniqueId) {\n                this.toggleCollapsed();\n            }\n        },\n        setUniqueId(id) {\n            this.uniqueId = id;\n        },\n        notifyOfClick() {\n            if (this.uniqueId) {\n                EventBus.$emit(\"click\", this.uniqueId);\n            }\n        },\n        collapse() {\n            this.isOpen = false;\n        },\n        toggleCollapsed() {\n            this.isOpen = !this.isOpen;\n        },\n        doTheSlide() {\n            const el = this.$refs.body;\n            if (this.isOpen === true) {\n                this.showCardContent = true;\n                this.$nextTick().then(() => {\n                    this.adjustHeight(el, el.scrollHeight);\n                });\n            } else {\n                this.slideUp(el);\n            }\n        },\n        adjustHeight(el, newHeight) {\n            el.style.height = `${newHeight}px`;\n        },\n        slideUp(el) {\n            if (el.style.height === \"auto\") {\n                el.style.height = `${el.scrollHeight}px`;\n            }\n            el.style.height = \"0px\";\n        },\n        autoHeightStart(el) {\n            // clear running interval\n            if (this.autoHeightInterval) this.autoHeightStop();\n            this.autoHeightInterval = setInterval(() => {\n                // set height for comparison to scrollHeight\n                try {\n                    const actualHeight =\n                        this.$refs.bodyContent.scrollHeight +\n                        this.$refs.bodyFooter.scrollHeight +\n                        1;\n                    if (\n                        el.style.height !== \"0px\" &&\n                        actualHeight !== el.style.height &&\n                        this.isOpen\n                    ) {\n                        this.adjustHeight(el, actualHeight);\n                    }\n                } catch (e) {\n                    this.autoHeightStop();\n                }\n            }, 100);\n        },\n        autoHeightStop() {\n            clearInterval(this.autoHeightInterval);\n            this.autoHeightInterval = null;\n        }\n    }\n};\n</script>\n\n<style scoped>\n.accordion-body {\n    height: 0px;\n    overflow: hidden;\n}\n.caret-down {\n    transform: rotate(180deg);\n}\n.header-icon {\n    width: 100%;\n}\n</style>\n"]},media:void 0})},__vue_scope_id__$2="data-v-a0f6932e",__vue_module_identifier__$2=void 0,__vue_is_functional_template__$2=!1;var BulmaAccordionItem=__vue_normalize__({render:__vue_render__$2,staticRenderFns:__vue_staticRenderFns__$2},__vue_inject_styles__$2,__vue_script__$2,__vue_scope_id__$2,__vue_is_functional_template__$2,__vue_module_identifier__$2,__vue_create_injector__,void 0);function install(a){install.installed||(install.installed=!0,a.component("bulma-accordion",BulmaAccordion),a.component("bulma-accordion-item",BulmaAccordionItem))}const plugin={install};let GlobalVue=null;"undefined"==typeof window?"undefined"!=typeof global&&(GlobalVue=global.Vue):GlobalVue=window.Vue,GlobalVue&&GlobalVue.use(plugin);export default plugin;export{install,BulmaAccordion,BulmaAccordionItem};
